<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reflectance sensor array &mdash; Yozh Robot  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="../../../_/static/javascript/readthedocs-doc-embed.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Distance sensors" href="distance.html" />
    <link rel="prev" title="Servos" href="servos.html" /> 

<!-- RTD Extra Head -->

<link rel="stylesheet" href="../../../_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "library/reflectance", "programming_language": "words", "project": "yozh-sc2023", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "sphinx_rtd_theme", "user_analytics_code": "", "version": "latest"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="../../../_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Yozh Robot
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primer.html">Python Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">Projects</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../library.html">Yozh Library Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="init.html">Initialization and general functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="UI.html">Display, buttons, LEDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="motors.html">Motor control</a></li>
<li class="toctree-l2"><a class="reference internal" href="servos.html">Servos</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="reflectance.html#">Reflectance sensor array</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reflectance.html#basic-usage">Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="reflectance.html#calibration">Calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="reflectance.html#line-following">Line following</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="distance.html">Distance sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="imu.html">Inertial Motion Unit</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Yozh Robot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../library.html">Yozh Library Reference</a></li>
      <li class="breadcrumb-item active">Reflectance sensor array</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/shurik179/yozh-SC2023/blob/main/docs/library/reflectance.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="reflectance-sensor-array">
<h1>Reflectance sensor array<a class="headerlink" href="reflectance.html#reflectance-sensor-array" title="Permalink to this heading"></a></h1>
<p>Yozh has a built-in array of reflectance sensors, pointed down. These sensors
can be used for detecting field borders, for following the line, and other similar
tasks.</p>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="reflectance.html#basic-usage" title="Permalink to this heading"></a></h2>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">linearray_on()</span></span></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">linearray_off()</span></span></dt>
<dd><p>Turns reflectance array on/off. By default, it is off (to save power).</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">linearray_raw(i)</span></span></dt>
<dd><p>Returns raw reading of sensor <code class="docutils literal notranslate"><span class="pre">i</span></code>. One can use either indices 0…7 or
(preferred) named values <code class="docutils literal notranslate"><span class="pre">bot.A1</span> <span class="pre">=</span> <span class="pre">0</span></code> … <code class="docutils literal notranslate"><span class="pre">bot.A8</span> <span class="pre">=</span> <span class="pre">7</span></code>. A1 is the
rightmost sensor, and A8, leftmost.</p>
<p>Readings range 0-1023 depending on amount of reflected light: the more light
reflected, the <strong>lower</strong> the value. Typical reading on white paper is about 50-80, and on
black painted plywood,  950. Note that black surfaces can be unexpectedly
reflective; on some materials which look black to human eye, the reading
can be as low as 600.</p>
</dd></dl>

</section>
<section id="calibration">
<h2>Calibration<a class="headerlink" href="reflectance.html#calibration" title="Permalink to this heading"></a></h2>
<p>Process of calibration refers to learning the values corresponding to black
and white areas of the field and then using these values to rescale the raw
readings.</p>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">calibrate()</span></span></dt>
<dd><p>Calibrates the sensors, recording the lowest and highest values. This
command should be called when some of the sensors are on the white area
and some, on black.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">linearray_cal(i)</span></span></dt>
<dd><p>Returns reading of sensor <code class="docutils literal notranslate"><span class="pre">i</span></code>, rescaled to 0-100:  white corresponds to 0
and black to 100. It uses the calibration data, so should only be used after
the sensor array  has been calibrated.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">sensor_on_white(i)</span></span></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if sensor <code class="docutils literal notranslate"><span class="pre">i</span></code> is on white and false otherwise. A sensor
is considered to be on white if calibrated value is below 50.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">sensor_on_black(i)</span></span></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if sensor <code class="docutils literal notranslate"><span class="pre">i</span></code> is on black and false otherwise.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">all_on_black()</span></span></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">all_on_white()</span></span></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if all 8 sensors are on black (resepctively, on white) and
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

</section>
<section id="line-following">
<h2>Line following<a class="headerlink" href="reflectance.html#line-following" title="Permalink to this heading"></a></h2>
<p>A common task for such robots is following the line. To help with that,
Yozh library provides the helper function.</p>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">line_position_white()</span></span></dt>
<dd><p>Returns a number showing position of the line under the robot, assuming
white line on black background.   The number
ranges between -5 (line far to the left of the robot) to 5 (line far to
the right of the robot). 0 is central position: line is exactly under the
center of the robot.</p>
<p>Slightly simplifying, this command works by counting how many sensors are
to the left of the line, how many are to the right, and then taking the
difference. It works best for lines of width 1-2cm; in particular, electric
tape or gaffers tape  (1/2” or 3/4”) works well.</p>
<p>This command only uses the central 6 sensors; rightmost and leftmost sensor
(A1 and A8) are not used.</p>
<p>If there is no line under these sensors, the function returns <cite>None</cite> value.
Thus, before using the retunred value in any computations, check that it is not <cite>None</cite>.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">line_position_black()</span></span></dt>
<dd><p>Same as above, but assuming black line on white background.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="servos.html" class="btn btn-neutral float-left" title="Servos" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="distance.html" class="btn btn-neutral float-right" title="Distance sensors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Alexander Kirillov.
      <span class="commit">Revision <code>c24d38fd</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../index.html">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://yozh-sc2023.readthedocs.io/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="https://yozh-sc2023.readthedocs.io/_/downloads/en/latest/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="https://readthedocs.org/projects/yozh-sc2023/?fromdocs=yozh-sc2023">Project Home</a>
          </dd>
          <dd>
            <a href="https://readthedocs.org/builds/yozh-sc2023/?fromdocs=yozh-sc2023">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>